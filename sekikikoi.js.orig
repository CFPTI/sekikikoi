window.onload = function() {
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(init);
};

function init() {
    var dataArray = [
        ['Musique', 11],
        ['Cinéma', 2],
        ['Politique', 2],
        ['Autre', 2]
    ];
    var myChart = drawChart(dataArray);

<<<<<<< HEAD
    var musicChart = Vue.component('music-chart', {
        data() {
            return {
                isChartHidden:false,
                refChartData : google.visualization.arrayToDataTable([
                    ['Catégorie', 'Nb de références'],
                    ['Musique',     11],
                    ['Cinéma',      2],
                    ['Politique',  2],
                    ['Autre', 2]
                ]),
                refChartOptions : {
                    legend:"none",
                    title: '',
                    pieSliceText:'label',
                    animation: {
                        duration: 1000,
                        easing: 'in',
                        startup: true
                    }
                },
                refChart : null,
                refChartId:"refPieChart"
            }
        },
        template:  '<div :id="refChartId" style="width: 900px; height: 500px;"></div>',
        mounted() {
           
            google.visualization.events.addListener(this.refChart, 'select', function() {
                console.log("select cat " + that.refChart.getSelection());
                showPage('detailRef');
            });
            this.initChart();
        },
        methods:{
            showPage : function(page){
=======
    google.visualization.events.addListener(myChart, 'select', function() {
        console.log(myChart.getSelection());
>>>>>>> Fixed chart and added categories get relations

        window.location = "./detailPolitique.html?cat=" + dataArray[myChart.getSelection()[0].row][0];
    });
}

function drawChart(dataArray) {
    var isChartHidden = false;

    var refChartOptions = {
        legend: "none",
        title: '',
        pieSliceText: 'label',
        animation: {
            duration: 1000,
            easing: 'in',
            startup: true
        }
    };
    var refChart = null;
    var refChartId = "refChart";

    var refChartData = new google.visualization.DataTable();
    refChartData.addColumn('string', 'Catégorie');
    refChartData.addColumn('number', 'Nb de références');

    refChartData.addRows(dataArray);

    refChart = new google.visualization.PieChart(document.getElementById(refChartId));
    refChart.draw(refChartData, refChartOptions);
    return refChart;
}

